@model ReceiptViewModel

@{
    ViewData["Title"] = "Receipt";
}

<h2>Receipt</h2>
<p><strong>Registration Number:</strong> @Model.RegistrationNumber</p>
<p><strong>Check-In Time:</strong> @Model.CheckInTime</p>
<p><strong>Check-Out Time:</strong> @Model.CheckOutTime</p>
<p><strong>Duration of Parking:</strong> @Model.GetFormattedDuration()</p>
<p><strong>Total:</strong> @Model.Total.ToString("C")</p>
<a asp-action="Index">Return to Garage</a>
<span> | </span>
<a href="javascript:void(0);" onclick="generatePDF()">Print receipt</a>

@section Scripts {

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <script>
        function generatePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            doc.setFontSize(20);
            doc.text("Receipt", 10, 20);
            doc.setFontSize(12);
            doc.text(`Registration Number: @Model.RegistrationNumber`, 10, 40);
            doc.text(`Check-In Time: @Model.CheckInTime`, 10, 50);
            doc.text(`Check-Out Time: @Model.CheckOutTime`, 10, 60);
            doc.text(`Duration of Parking: @Model.GetFormattedDuration()`, 10, 70);
            doc.text(`Total: $@Model.Total.ToString("C")`, 10, 80);
            doc.save("Receipt_"+`@Model.RegistrationNumber`+".pdf");
        }
    </script>
}